SHELL := /bin/bash

prod:
	@echo "ğŸš€ DÃ©marrage des services WASPL en mode PRODUCTION..."
	docker compose up --build -d

down:
	@echo "ğŸ” ArrÃªt et suppression des containers..."
	docker compose down --remove-orphans

reset-db:
	@echo "ğŸ¤¨ Suppression du dossier ./mongodb..."
	rm -rf mongodb
	@echo "ğŸ›‰ Nettoyage des volumes Docker inutilisÃ©s..."
	docker volume prune -f

reset-all:
	@echo "ğŸ›‘ ArrÃªt et suppression des containers..."
	docker compose down --remove-orphans
	@echo "ğŸ—‘ï¸ Suppression des containers restants..."
	docker ps -aq --filter "name=waspl" | xargs -r docker rm -f
	@echo "ğŸ§¼ Suppression des images Docker locales..."
	docker rmi -f waspl-waspleditor waspl-waspltestrunner || true
